{"name":"eacdfbbbe","url":"index.html (ç­‰èµ„æº+1)","showName":"å…­å…­æˆé•¿è®°","appid":"com.eacdfbbbe.app","icon":"","iconPath":"C:\\Users\\SDD\\AppData\\Roaming\\com.pakeplus.pacbao\\eacdfbbbe.png","iconRound":true,"state":true,"single":true,"injectJq":true,"tauriApi":false,"devbug":false,"version":"0.0.1","preview":"iPad","platform":["2-2"],"width":1024,"height":768,"desc":"","jsFile":[],"filterCss":"","customJs":"<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>å„¿ç«¥ç§¯åˆ†å¥–åŠ±ç³»ç»Ÿ</title>\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css\">\n    <style>\n        * {\n            margin: 0;\n            padding: 0;\n            box-sizing: border-box;\n            font-family: 'Segoe UI', 'Arial Rounded MT Bold', 'Arial', sans-serif;\n        }\n        \n        body {\n            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);\n            min-height: 100vh;\n            padding: 20px;\n            color: #333;\n        }\n        \n        .container {\n            max-width: 1200px;\n            margin: 0 auto;\n            background-color: rgba(255, 255, 255, 0.95);\n            border-radius: 20px;\n            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);\n            overflow: hidden;\n        }\n        \n        header {\n            background: linear-gradient(90deg, #4b6cb7 0%, #182848 100%);\n            color: white;\n            padding: 25px 30px;\n            text-align: center;\n            border-bottom-left-radius: 20px;\n            border-bottom-right-radius: 20px;\n        }\n        \n        h1 {\n            font-size: 2.5rem;\n            margin-bottom: 10px;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            gap: 15px;\n        }\n        \n        h1 i {\n            color: #FFD700;\n        }\n        \n        .subtitle {\n            font-size: 1.2rem;\n            opacity: 0.9;\n        }\n        \n        .dashboard {\n            display: flex;\n            flex-wrap: wrap;\n            padding: 25px;\n            gap: 25px;\n        }\n        \n        .score-card {\n            flex: 1;\n            min-width: 300px;\n            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);\n            border-radius: 15px;\n            padding: 25px;\n            color: white;\n            text-align: center;\n            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);\n            display: flex;\n            flex-direction: column;\n            align-items: center;\n            position: relative;\n        }\n        \n        .avatar-container {\n            position: relative;\n            margin-bottom: 20px;\n        }\n        \n        .avatar {\n            width: 120px;\n            height: 120px;\n            border-radius: 50%;\n            background-color: white;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            font-size: 4rem;\n            border: 5px solid white;\n            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);\n            overflow: hidden;\n        }\n        \n        .avatar img {\n            width: 100%;\n            height: 100%;\n            object-fit: cover;\n        }\n        \n        .change-avatar-btn {\n            position: absolute;\n            bottom: 5px;\n            right: 5px;\n            width: 40px;\n            height: 40px;\n            border-radius: 50%;\n            background-color: #3498db;\n            color: white;\n            border: none;\n            cursor: pointer;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            font-size: 1.2rem;\n            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.2);\n            transition: all 0.3s ease;\n        }\n        \n        .change-avatar-btn:hover {\n            transform: scale(1.1);\n            background-color: #2980b9;\n        }\n        \n        .score-title {\n            font-size: 1.8rem;\n            margin-bottom: 15px;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            gap: 10px;\n        }\n        \n        .score-value {\n            font-size: 4.5rem;\n            font-weight: bold;\n            margin: 10px 0 20px;\n            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);\n        }\n        \n        .score-buttons {\n            display: flex;\n            gap: 15px;\n            margin-top: 10px;\n            width: 100%;\n        }\n        \n        .btn {\n            padding: 12px 20px;\n            border: none;\n            border-radius: 50px;\n            font-size: 1rem;\n            font-weight: bold;\n            cursor: pointer;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            gap: 8px;\n            transition: all 0.3s ease;\n            flex: 1;\n        }\n        \n        .btn-add {\n            background-color: #4CAF50;\n            color: white;\n        }\n        \n        .btn-subtract {\n            background-color: #f44336;\n            color: white;\n        }\n        \n        .btn:hover {\n            transform: translateY(-3px);\n            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);\n        }\n        \n        .btn:active {\n            transform: translateY(0);\n        }\n        \n        .tasks-rewards {\n            display: flex;\n            flex-wrap: wrap;\n            gap: 25px;\n            padding: 0 25px 25px;\n        }\n        \n        .column {\n            flex: 1;\n            min-width: 300px;\n            background-color: white;\n            border-radius: 15px;\n            padding: 25px;\n            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);\n        }\n        \n        .column-header {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            margin-bottom: 20px;\n            padding-bottom: 15px;\n            border-bottom: 2px solid #f0f0f0;\n        }\n        \n        .column-title {\n            font-size: 1.8rem;\n            color: #2c3e50;\n            display: flex;\n            align-items: center;\n            gap: 10px;\n        }\n        \n        .btn-add-item {\n            background-color: #3498db;\n            color: white;\n            padding: 10px 20px;\n            font-size: 0.9rem;\n        }\n        \n        .item-list {\n            display: flex;\n            flex-direction: column;\n            gap: 15px;\n            max-height: 400px;\n            overflow-y: auto;\n            padding-right: 5px;\n        }\n        \n        .item {\n            background-color: #f8f9fa;\n            border-radius: 12px;\n            padding: 18px;\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            border-left: 5px solid #3498db;\n            transition: all 0.3s ease;\n        }\n        \n        .reward-item {\n            border-left-color: #e74c3c;\n        }\n        \n        .item:hover {\n            transform: translateY(-3px);\n            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.08);\n        }\n        \n        .item-info {\n            flex: 1;\n        }\n        \n        .item-name {\n            font-size: 1.3rem;\n            font-weight: bold;\n            margin-bottom: 5px;\n        }\n        \n        .item-desc {\n            color: #7f8c8d;\n            font-size: 0.95rem;\n        }\n        \n        .item-points {\n            font-size: 1.4rem;\n            font-weight: bold;\n            color: #2c3e50;\n            margin-right: 15px;\n        }\n        \n        .item-controls {\n            display: flex;\n            gap: 8px;\n        }\n        \n        .icon-btn {\n            width: 40px;\n            height: 40px;\n            border-radius: 50%;\n            border: none;\n            cursor: pointer;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            font-size: 1rem;\n            transition: all 0.2s ease;\n        }\n        \n        .icon-btn-complete {\n            background-color: #2ecc71;\n            color: white;\n        }\n        \n        .icon-btn-redeem {\n            background-color: #9b59b6;\n            color: white;\n        }\n        \n        .icon-btn-edit {\n            background-color: #f39c12;\n            color: white;\n        }\n        \n        .icon-btn-delete {\n            background-color: #e74c3c;\n            color: white;\n        }\n        \n        .icon-btn:hover {\n            transform: scale(1.1);\n        }\n        \n        .history-section {\n            padding: 0 25px 25px;\n        }\n        \n        .history-card {\n            background-color: white;\n            border-radius: 15px;\n            padding: 25px;\n            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);\n        }\n        \n        .history-list {\n            max-height: 250px;\n            overflow-y: auto;\n            margin-top: 15px;\n        }\n        \n        .history-item {\n            display: flex;\n            justify-content: space-between;\n            padding: 15px;\n            border-bottom: 1px solid #f0f0f0;\n        }\n        \n        .history-item:last-child {\n            border-bottom: none;\n        }\n        \n        .history-positive {\n            color: #2ecc71;\n        }\n        \n        .history-negative {\n            color: #e74c3c;\n        }\n        \n        .modal {\n            display: none;\n            position: fixed;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n            background-color: rgba(0, 0, 0, 0.7);\n            z-index: 1000;\n            align-items: center;\n            justify-content: center;\n        }\n        \n        .modal-content {\n            background-color: white;\n            border-radius: 15px;\n            width: 90%;\n            max-width: 500px;\n            padding: 30px;\n            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);\n            animation: modalFade 0.3s;\n        }\n        \n        @keyframes modalFade {\n            from { opacity: 0; transform: translateY(-50px); }\n            to { opacity: 1; transform: translateY(0); }\n        }\n        \n        .modal-header {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            margin-bottom: 25px;\n        }\n        \n        .modal-title {\n            font-size: 1.8rem;\n            color: #2c3e50;\n        }\n        \n        .close-btn {\n            background: none;\n            border: none;\n            font-size: 1.8rem;\n            cursor: pointer;\n            color: #7f8c8d;\n        }\n        \n        .form-group {\n            margin-bottom: 20px;\n        }\n        \n        label {\n            display: block;\n            margin-bottom: 8px;\n            font-weight: bold;\n            color: #2c3e50;\n        }\n        \n        input, textarea, select {\n            width: 100%;\n            padding: 12px 15px;\n            border: 2px solid #e0e0e0;\n            border-radius: 10px;\n            font-size: 1rem;\n            transition: border-color 0.3s;\n        }\n        \n        input:focus, textarea:focus, select:focus {\n            outline: none;\n            border-color: #3498db;\n        }\n        \n        textarea {\n            resize: vertical;\n            min-height: 80px;\n        }\n        \n        .form-buttons {\n            display: flex;\n            gap: 15px;\n            margin-top: 25px;\n        }\n        \n        .btn-submit {\n            background-color: #3498db;\n            color: white;\n            flex: 2;\n        }\n        \n        .btn-cancel {\n            background-color: #95a5a6;\n            color: white;\n            flex: 1;\n        }\n        \n        .empty-state {\n            text-align: center;\n            padding: 40px 20px;\n            color: #7f8c8d;\n        }\n        \n        .empty-state i {\n            font-size: 3rem;\n            margin-bottom: 15px;\n            opacity: 0.5;\n        }\n        \n        .empty-state p {\n            font-size: 1.1rem;\n        }\n        \n        .data-controls {\n            display: flex;\n            justify-content: center;\n            gap: 15px;\n            margin-top: 20px;\n            padding: 0 25px 25px;\n        }\n        \n        .btn-export {\n            background-color: #16a085;\n            color: white;\n        }\n        \n        .btn-import {\n            background-color: #8e44ad;\n            color: white;\n        }\n        \n        .btn-reset {\n            background-color: #c0392b;\n            color: white;\n        }\n        \n        /* å¤´åƒé€‰æ‹©æ¨¡æ€æ¡†æ ·å¼ */\n        .avatar-grid {\n            display: grid;\n            grid-template-columns: repeat(4, 1fr);\n            gap: 15px;\n            margin: 20px 0;\n            max-height: 400px;\n            overflow-y: auto;\n            padding: 10px;\n        }\n        \n        .avatar-option {\n            width: 100%;\n            aspect-ratio: 1;\n            border-radius: 50%;\n            background-color: #f8f9fa;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            font-size: 3rem;\n            cursor: pointer;\n            transition: all 0.3s ease;\n            border: 3px solid transparent;\n        }\n        \n        .avatar-option:hover {\n            transform: scale(1.1);\n            border-color: #3498db;\n        }\n        \n        .avatar-option.selected {\n            border-color: #2ecc71;\n            box-shadow: 0 0 0 3px rgba(46, 204, 113, 0.3);\n        }\n        \n        .avatar-option img {\n            width: 100%;\n            height: 100%;\n            object-fit: cover;\n            border-radius: 50%;\n        }\n        \n        .avatar-type-selector {\n            display: flex;\n            margin-bottom: 20px;\n            border-bottom: 2px solid #f0f0f0;\n        }\n        \n        .avatar-type-btn {\n            flex: 1;\n            padding: 12px;\n            background: none;\n            border: none;\n            font-size: 1rem;\n            font-weight: bold;\n            cursor: pointer;\n            color: #7f8c8d;\n            transition: all 0.3s ease;\n            border-bottom: 3px solid transparent;\n        }\n        \n        .avatar-type-btn.active {\n            color: #3498db;\n            border-bottom-color: #3498db;\n        }\n        \n        /* ä¸Šä¼ å¤´åƒåŒºåŸŸ */\n        .upload-avatar-container {\n            text-align: center;\n            padding: 30px 20px;\n            border: 2px dashed #3498db;\n            border-radius: 15px;\n            margin: 20px 0;\n            background-color: #f8fafc;\n        }\n        \n        .upload-avatar-btn {\n            background-color: #3498db;\n            color: white;\n            padding: 12px 25px;\n            border-radius: 50px;\n            border: none;\n            font-size: 1rem;\n            font-weight: bold;\n            cursor: pointer;\n            display: inline-flex;\n            align-items: center;\n            gap: 10px;\n            margin-top: 15px;\n            transition: all 0.3s ease;\n        }\n        \n        .upload-avatar-btn:hover {\n            background-color: #2980b9;\n            transform: translateY(-3px);\n        }\n        \n        .avatar-preview {\n            width: 150px;\n            height: 150px;\n            border-radius: 50%;\n            margin: 0 auto 20px;\n            background-color: #f8f9fa;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            font-size: 4rem;\n            overflow: hidden;\n            border: 5px solid white;\n            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);\n        }\n        \n        .avatar-preview img {\n            width: 100%;\n            height: 100%;\n            object-fit: cover;\n        }\n        \n        @media (max-width: 768px) {\n            .dashboard {\n                padding: 15px;\n            }\n            \n            .tasks-rewards {\n                padding: 0 15px 15px;\n            }\n            \n            .score-value {\n                font-size: 3.5rem;\n            }\n            \n            .column {\n                padding: 20px;\n            }\n            \n            .history-section {\n                padding: 0 15px 15px;\n            }\n            \n            .avatar-grid {\n                grid-template-columns: repeat(3, 1fr);\n            }\n            \n            .avatar {\n                width: 100px;\n                height: 100px;\n                font-size: 3rem;\n            }\n        }\n        \n        /* æ»šåŠ¨æ¡æ ·å¼ */\n        ::-webkit-scrollbar {\n            width: 8px;\n        }\n        \n        ::-webkit-scrollbar-track {\n            background: #f1f1f1;\n            border-radius: 10px;\n        }\n        \n        ::-webkit-scrollbar-thumb {\n            background: #c1c1c1;\n            border-radius: 10px;\n        }\n        \n        ::-webkit-scrollbar-thumb:hover {\n            background: #a8a8a8;\n        }\n        \n        /* å„¿ç«¥ä¿¡æ¯åŒºåŸŸ */\n        .child-info {\n            margin-top: 10px;\n            font-size: 1.1rem;\n        }\n        \n        .child-name {\n            font-weight: bold;\n            font-size: 1.3rem;\n            margin-bottom: 5px;\n        }\n        \n        .child-age {\n            color: rgba(255, 255, 255, 0.9);\n        }\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        <header>\n            <h1><i class=\"fas fa-star\"></i> å„¿ç«¥ç§¯åˆ†å¥–åŠ±ç³»ç»Ÿ <i class=\"fas fa-star\"></i></h1>\n            <p class=\"subtitle\">å®Œæˆä»»åŠ¡èµšå–ç§¯åˆ†ï¼Œå…‘æ¢å¿ƒä»ªå¥–åŠ±ï¼</p>\n        </header>\n        \n        <div class=\"dashboard\">\n            <div class=\"score-card\">\n                <div class=\"avatar-container\">\n                    <div class=\"avatar\" id=\"currentAvatar\">\n                        <span id=\"currentAvatarEmoji\">ğŸ‘¦</span>\n                    </div>\n                    <button class=\"change-avatar-btn\" id=\"changeAvatarBtn\">\n                        <i class=\"fas fa-camera\"></i>\n                    </button>\n                </div>\n                \n                <div class=\"child-info\">\n                    <div class=\"child-name\" id=\"childName\">å°æ˜</div>\n                    <div class=\"child-age\" id=\"childAge\">6å²</div>\n                </div>\n                \n                <div class=\"score-title\">\n                    <i class=\"fas fa-trophy\"></i>\n                    <span>å½“å‰æ€»ç§¯åˆ†</span>\n                </div>\n                <div class=\"score-value\" id=\"totalPoints\">0</div>\n                <div class=\"score-buttons\">\n                    <button class=\"btn btn-add\" id=\"addPointsBtn\">\n                        <i class=\"fas fa-plus-circle\"></i> æ·»åŠ ç§¯åˆ†\n                    </button>\n                    <button class=\"btn btn-subtract\" id=\"subtractPointsBtn\">\n                        <i class=\"fas fa-minus-circle\"></i> æ‰£é™¤ç§¯åˆ†\n                    </button>\n                </div>\n            </div>\n            \n            <div class=\"tasks-rewards\">\n                <div class=\"column\">\n                    <div class=\"column-header\">\n                        <h2 class=\"column-title\">\n                            <i class=\"fas fa-tasks\"></i> ä»Šæ—¥ä»»åŠ¡\n                        </h2>\n                        <button class=\"btn btn-add-item\" id=\"addTaskBtn\">\n                            <i class=\"fas fa-plus\"></i> æ·»åŠ ä»»åŠ¡\n                        </button>\n                    </div>\n                    <div class=\"item-list\" id=\"tasksList\">\n                        <!-- ä»»åŠ¡åˆ—è¡¨å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->\n                    </div>\n                </div>\n                \n                <div class=\"column\">\n                    <div class=\"column-header\">\n                        <h2 class=\"column-title\">\n                            <i class=\"fas fa-gift\"></i> å¥–åŠ±å…‘æ¢\n                        </h2>\n                        <button class=\"btn btn-add-item\" id=\"addRewardBtn\">\n                            <i class=\"fas fa-plus\"></i> æ·»åŠ å¥–åŠ±\n                        </button>\n                    </div>\n                    <div class=\"item-list\" id=\"rewardsList\">\n                        <!-- å¥–åŠ±åˆ—è¡¨å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->\n                    </div>\n                </div>\n            </div>\n            \n            <div class=\"history-section\">\n                <div class=\"history-card\">\n                    <h2 class=\"column-title\">\n                        <i class=\"fas fa-history\"></i> ç§¯åˆ†å†å²\n                    </h2>\n                    <div class=\"history-list\" id=\"historyList\">\n                        <!-- å†å²è®°å½•å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->\n                    </div>\n                </div>\n            </div>\n            \n            <div class=\"data-controls\">\n                <button class=\"btn btn-export\" id=\"exportBtn\">\n                    <i class=\"fas fa-download\"></i> å¯¼å‡ºæ•°æ®\n                </button>\n                <button class=\"btn btn-import\" id=\"importBtn\">\n                    <i class=\"fas fa-upload\"></i> å¯¼å…¥æ•°æ®\n                </button>\n                <button class=\"btn btn-reset\" id=\"resetBtn\">\n                    <i class=\"fas fa-redo\"></i> é‡ç½®ç³»ç»Ÿ\n                </button>\n            </div>\n        </div>\n    </div>\n    \n    <!-- æ·»åŠ ä»»åŠ¡/å¥–åŠ±æ¨¡æ€æ¡† -->\n    <div class=\"modal\" id=\"itemModal\">\n        <div class=\"modal-content\">\n            <div class=\"modal-header\">\n                <h3 class=\"modal-title\" id=\"modalTitle\">æ·»åŠ ä»»åŠ¡</h3>\n                <button class=\"close-btn\" id=\"closeModalBtn\">&times;</button>\n            </div>\n            <form id=\"itemForm\">\n                <input type=\"hidden\" id=\"itemId\">\n                <input type=\"hidden\" id=\"itemType\">\n                \n                <div class=\"form-group\">\n                    <label for=\"itemName\">åç§°</label>\n                    <input type=\"text\" id=\"itemName\" required>\n                </div>\n                \n                <div class=\"form-group\">\n                    <label for=\"itemDescription\">æè¿°</label>\n                    <textarea id=\"itemDescription\" placeholder=\"æè¿°ä»»åŠ¡æˆ–å¥–åŠ±...\"></textarea>\n                </div>\n                \n                <div class=\"form-group\">\n                    <label for=\"itemPoints\" id=\"pointsLabel\">ç§¯åˆ†å€¼</label>\n                    <input type=\"number\" id=\"itemPoints\" min=\"1\" max=\"1000\" required>\n                </div>\n                \n                <div class=\"form-group\" id=\"frequencyGroup\" style=\"display: none;\">\n                    <label for=\"itemFrequency\">é‡å¤é¢‘ç‡</label>\n                    <select id=\"itemFrequency\">\n                        <option value=\"daily\">æ¯æ—¥</option>\n                        <option value=\"weekly\">æ¯å‘¨</option>\n                        <option value=\"once\">ä»…ä¸€æ¬¡</option>\n                    </select>\n                </div>\n                \n                <div class=\"form-buttons\">\n                    <button type=\"submit\" class=\"btn btn-submit\" id=\"submitBtn\">ä¿å­˜</button>\n                    <button type=\"button\" class=\"btn btn-cancel\" id=\"cancelBtn\">å–æ¶ˆ</button>\n                </div>\n            </form>\n        </div>\n    </div>\n    \n    <!-- ç§¯åˆ†è°ƒæ•´æ¨¡æ€æ¡† -->\n    <div class=\"modal\" id=\"pointsModal\">\n        <div class=\"modal-content\">\n            <div class=\"modal-header\">\n                <h3 class=\"modal-title\" id=\"pointsModalTitle\">è°ƒæ•´ç§¯åˆ†</h3>\n                <button class=\"close-btn\" id=\"closePointsModalBtn\">&times;</button>\n            </div>\n            <form id=\"pointsForm\">\n                <div class=\"form-group\">\n                    <label for=\"pointsAmount\">ç§¯åˆ†æ•°é‡</label>\n                    <input type=\"number\" id=\"pointsAmount\" min=\"1\" max=\"1000\" value=\"10\" required>\n                </div>\n                \n                <div class=\"form-group\">\n                    <label for=\"pointsReason\">åŸå› è¯´æ˜</label>\n                    <textarea id=\"pointsReason\" placeholder=\"è¯´æ˜ä¸ºä»€ä¹ˆå¢åŠ æˆ–æ‰£é™¤ç§¯åˆ†...\" required></textarea>\n                </div>\n                \n                <div class=\"form-buttons\">\n                    <button type=\"submit\" class=\"btn btn-submit\" id=\"confirmPointsBtn\">ç¡®è®¤</button>\n                    <button type=\"button\" class=\"btn btn-cancel\" id=\"cancelPointsBtn\">å–æ¶ˆ</button>\n                </div>\n            </form>\n        </div>\n    </div>\n    \n    <!-- å¤´åƒé€‰æ‹©æ¨¡æ€æ¡† -->\n    <div class=\"modal\" id=\"avatarModal\">\n        <div class=\"modal-content\" style=\"max-width: 600px;\">\n            <div class=\"modal-header\">\n                <h3 class=\"modal-title\">é€‰æ‹©å„¿ç«¥å¤´åƒ</h3>\n                <button class=\"close-btn\" id=\"closeAvatarModalBtn\">&times;</button>\n            </div>\n            \n            <div class=\"avatar-type-selector\">\n                <button class=\"avatar-type-btn active\" data-type=\"emoji\">è¡¨æƒ…å¤´åƒ</button>\n                <button class=\"avatar-type-btn\" data-type=\"cartoon\">å¡é€šå¤´åƒ</button>\n                <button class=\"avatar-type-btn\" data-type=\"upload\">ä¸Šä¼ å¤´åƒ</button>\n            </div>\n            \n            <!-- è¡¨æƒ…å¤´åƒé€‰æ‹© -->\n            <div class=\"avatar-selector active\" id=\"emojiSelector\">\n                <div class=\"avatar-grid\" id=\"emojiGrid\">\n                    <!-- Emojiå¤´åƒå°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->\n                </div>\n            </div>\n            \n            <!-- å¡é€šå¤´åƒé€‰æ‹© -->\n            <div class=\"avatar-selector\" id=\"cartoonSelector\">\n                <div class=\"avatar-grid\" id=\"cartoonGrid\">\n                    <!-- å¡é€šå¤´åƒå°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->\n                </div>\n            </div>\n            \n            <!-- ä¸Šä¼ å¤´åƒ -->\n            <div class=\"avatar-selector\" id=\"uploadSelector\">\n                <div class=\"upload-avatar-container\">\n                    <div class=\"avatar-preview\" id=\"uploadPreview\">\n                        <span>ğŸ‘¦</span>\n                    </div>\n                    <p>ä¸Šä¼ ä¸€å¼ å„¿ç«¥çš„ç…§ç‰‡ä½œä¸ºå¤´åƒ</p>\n                    <input type=\"file\" id=\"avatarUpload\" accept=\"image/*\" style=\"display: none;\">\n                    <button type=\"button\" class=\"upload-avatar-btn\" id=\"chooseImageBtn\">\n                        <i class=\"fas fa-image\"></i> é€‰æ‹©å›¾ç‰‡\n                    </button>\n                </div>\n                \n                <div class=\"form-buttons\">\n                    <button type=\"button\" class=\"btn btn-submit\" id=\"uploadAvatarBtn\">è®¾ç½®ä¸ºå¤´åƒ</button>\n                    <button type=\"button\" class=\"btn btn-cancel\" id=\"cancelUploadBtn\">å–æ¶ˆ</button>\n                </div>\n            </div>\n            \n            <div class=\"form-group\" style=\"margin-top: 20px;\">\n                <label for=\"childNameInput\">å„¿ç«¥å§“å</label>\n                <input type=\"text\" id=\"childNameInput\" placeholder=\"è¾“å…¥å„¿ç«¥å§“å\" value=\"å°æ˜\">\n            </div>\n            \n            <div class=\"form-group\">\n                <label for=\"childAgeInput\">å„¿ç«¥å¹´é¾„</label>\n                <input type=\"number\" id=\"childAgeInput\" min=\"1\" max=\"18\" value=\"6\">\n            </div>\n            \n            <div class=\"form-buttons\">\n                <button type=\"button\" class=\"btn btn-submit\" id=\"saveAvatarBtn\">ä¿å­˜è®¾ç½®</button>\n                <button type=\"button\" class=\"btn btn-cancel\" id=\"cancelAvatarBtn\">å–æ¶ˆ</button>\n            </div>\n        </div>\n    </div>\n\n    <script>\n        // ç³»ç»Ÿæ•°æ®\n        let systemData = {\n            totalPoints: 100,\n            childName: \"å°æ˜\",\n            childAge: 6,\n            avatar: {\n                type: \"emoji\", // \"emoji\", \"cartoon\", \"upload\"\n                value: \"ğŸ‘¦\",\n                image: null // å­˜å‚¨base64å›¾åƒæ•°æ®ï¼ˆå¦‚æœä¸Šä¼ äº†å›¾ç‰‡ï¼‰\n            },\n            tasks: [\n                { id: 1, name: \"æ•´ç†æˆ¿é—´\", description: \"ä¿æŒæˆ¿é—´æ•´æ´å¹²å‡€\", points: 10, frequency: \"daily\", completedToday: false },\n                { id: 2, name: \"å®Œæˆä½œä¸š\", description: \"æŒ‰æ—¶å®Œæˆæ‰€æœ‰ä½œä¸š\", points: 15, frequency: \"daily\", completedToday: false },\n                { id: 3, name: \"é˜…è¯»30åˆ†é’Ÿ\", description: \"æ¯å¤©é˜…è¯»è¯¾å¤–ä¹¦ç±\", points: 8, frequency: \"daily\", completedToday: true },\n                { id: 4, name: \"å¸®å¿™æ´—ç¢—\", description: \"æ™šé¤åå¸®å¿™æ´—ç¢—\", points: 5, frequency: \"daily\", completedToday: false }\n            ],\n            rewards: [\n                { id: 1, name: \"çœ‹ç”µè§†30åˆ†é’Ÿ\", description: \"è§‚çœ‹å–œæ¬¢çš„ç”µè§†èŠ‚ç›®\", points: 20 },\n                { id: 2, name: \"ç©å¹³æ¿ç”µè„‘\", description: \"ä½¿ç”¨å¹³æ¿ç”µè„‘å¨±ä¹\", points: 25 },\n                { id: 3, name: \"ä¹°æ–°ç©å…·\", description: \"é€‰æ‹©ä¸€ä¸ªå°ç©å…·\", points: 100 },\n                { id: 4, name: \"å‘¨æœ«å»å…¬å›­\", description: \"å‘¨æœ«å®¶åº­å…¬å›­æ¸¸ç©\", points: 50 }\n            ],\n            history: [\n                { id: 1, type: \"task\", name: \"é˜…è¯»30åˆ†é’Ÿ\", points: 8, date: \"2023-10-15 18:30\", reason: \"å®Œæˆä»»åŠ¡\" },\n                { id: 2, type: \"reward\", name: \"çœ‹ç”µè§†30åˆ†é’Ÿ\", points: -20, date: \"2023-10-14 19:00\", reason: \"å…‘æ¢å¥–åŠ±\" },\n                { id: 3, type: \"task\", name: \"å®Œæˆä½œä¸š\", points: 15, date: \"2023-10-14 17:00\", reason: \"å®Œæˆä»»åŠ¡\" },\n                { id: 4, type: \"task\", name: \"æ•´ç†æˆ¿é—´\", points: 10, date: \"2023-10-14 09:00\", reason: \"å®Œæˆä»»åŠ¡\" },\n                { id: 5, type: \"reward\", name: \"ç©å¹³æ¿ç”µè„‘\", points: -25, date: \"2023-10-13 16:00\", reason: \"å…‘æ¢å¥–åŠ±\" }\n            ],\n            nextId: { task: 5, reward: 5, history: 6 }\n        };\n\n        // å¤´åƒé€‰é¡¹\n        const avatarOptions = {\n            emoji: [\"ğŸ‘¦\", \"ğŸ‘§\", \"ğŸ§’\", \"ğŸ‘¨\", \"ğŸ‘©\", \"ğŸ¦¸\", \"ğŸ¦¹\", \"ğŸ§™\", \"ğŸ§›\", \"ğŸ§\", \"ğŸ§\", \"ğŸ§Ÿ\", \"ğŸ¶\", \"ğŸ±\", \"ğŸ­\", \"ğŸ¹\", \"ğŸ°\", \"ğŸ¦Š\", \"ğŸ»\", \"ğŸ¼\", \"ğŸ¨\", \"ğŸ¯\", \"ğŸ¦\", \"ğŸ®\", \"ğŸµ\", \"ğŸ”\", \"ğŸ§\", \"ğŸ¦\", \"ğŸ¤\", \"ğŸ¦„\", \"ğŸ\", \"ğŸ¦‹\", \"ğŸ\", \"ğŸ¢\", \"ğŸ¬\", \"ğŸ³\", \"ğŸ¦€\", \"ğŸ¦\"],\n            cartoon: [\"boy1\", \"girl1\", \"boy2\", \"girl2\", \"superhero\", \"princess\", \"wizard\", \"fairy\", \"animal1\", \"animal2\", \"animal3\", \"animal4\"]\n        };\n\n        // å¡é€šå¤´åƒURLæ˜ å°„ï¼ˆä½¿ç”¨å…è´¹å ä½å›¾ï¼Œå®é™…ä½¿ç”¨æ—¶å¯ä»¥æ›¿æ¢ä¸ºçœŸå®å›¾ç‰‡ï¼‰\n        const cartoonAvatarUrls = {\n            \"boy1\": \"https://api.dicebear.com/7.x/avataaars/svg?seed=boy1&backgroundColor=b6e3f4\",\n            \"girl1\": \"https://api.dicebear.com/7.x/avataaars/svg?seed=girl1&backgroundColor=f8b5d1\",\n            \"boy2\": \"https://api.dicebear.com/7.x/avataaars/svg?seed=boy2&backgroundColor=ffd5dc\",\n            \"girl2\": \"https://api.dicebear.com/7.x/avataaars/svg?seed=girl2&backgroundColor=ffdfbf\",\n            \"superhero\": \"https://api.dicebear.com/7.x/avataaars/svg?seed=superhero&backgroundColor=d1d4f9\",\n            \"princess\": \"https://api.dicebear.com/7.x/avataaars/svg?seed=princess&backgroundColor=ffd5dc\",\n            \"wizard\": \"https://api.dicebear.com/7.x/avataaars/svg?seed=wizard&backgroundColor=c0aede\",\n            \"fairy\": \"https://api.dicebear.com/7.x/avataaars/svg?seed=fairy&backgroundColor=d1d4f9\",\n            \"animal1\": \"https://api.dicebear.com/7.x/avataaars/svg?seed=animal1&backgroundColor=b6e3f4\",\n            \"animal2\": \"https://api.dicebear.com/7.x/avataaars/svg?seed=animal2&backgroundColor=ffdfbf\",\n            \"animal3\": \"https://api.dicebear.com/7.x/avataaars/svg?seed=animal3&backgroundColor=d1d4f9\",\n            \"animal4\": \"https://api.dicebear.com/7.x/avataaars/svg?seed=animal4&backgroundColor=ffd5dc\"\n        };\n\n        // DOMå…ƒç´ \n        const totalPointsEl = document.getElementById('totalPoints');\n        const tasksListEl = document.getElementById('tasksList');\n        const rewardsListEl = document.getElementById('rewardsList');\n        const historyListEl = document.getElementById('historyList');\n        const currentAvatarEmoji = document.getElementById('currentAvatarEmoji');\n        const currentAvatar = document.getElementById('currentAvatar');\n        const childNameEl = document.getElementById('childName');\n        const childAgeEl = document.getElementById('childAge');\n        \n        // æ¨¡æ€æ¡†ç›¸å…³\n        const itemModal = document.getElementById('itemModal');\n        const pointsModal = document.getElementById('pointsModal');\n        const avatarModal = document.getElementById('avatarModal');\n        const itemForm = document.getElementById('itemForm');\n        const pointsForm = document.getElementById('pointsForm');\n        \n        // å¤´åƒé€‰æ‹©ç›¸å…³å…ƒç´ \n        const emojiGrid = document.getElementById('emojiGrid');\n        const cartoonGrid = document.getElementById('cartoonGrid');\n        const uploadPreview = document.getElementById('uploadPreview');\n        const avatarUpload = document.getElementById('avatarUpload');\n        \n        // å½“å‰é€‰ä¸­çš„å¤´åƒ\n        let selectedAvatar = {\n            type: \"emoji\",\n            value: \"ğŸ‘¦\",\n            image: null\n        };\n        \n        // ä¸Šä¼ çš„å›¾ç‰‡æ•°æ®\n        let uploadedImage = null;\n\n        // åˆå§‹åŒ–åº”ç”¨\n        document.addEventListener('DOMContentLoaded', function() {\n            // å°è¯•ä»æœ¬åœ°å­˜å‚¨åŠ è½½æ•°æ®\n            loadData();\n            \n            // æ›´æ–°æ˜¾ç¤º\n            updateDisplay();\n            \n            // åˆå§‹åŒ–å¤´åƒé€‰æ‹©å™¨\n            initAvatarSelectors();\n            \n            // äº‹ä»¶ç›‘å¬å™¨\n            setupEventListeners();\n        });\n\n        // åˆå§‹åŒ–å¤´åƒé€‰æ‹©å™¨\n        function initAvatarSelectors() {\n            // åˆå§‹åŒ–Emojiå¤´åƒç½‘æ ¼\n            emojiGrid.innerHTML = '';\n            avatarOptions.emoji.forEach(emoji => {\n                const emojiOption = document.createElement('div');\n                emojiOption.className = 'avatar-option';\n                if (systemData.avatar.type === 'emoji' && systemData.avatar.value === emoji) {\n                    emojiOption.classList.add('selected');\n                }\n                emojiOption.textContent = emoji;\n                emojiOption.dataset.value = emoji;\n                emojiOption.addEventListener('click', () => selectAvatar('emoji', emoji));\n                emojiGrid.appendChild(emojiOption);\n            });\n            \n            // åˆå§‹åŒ–å¡é€šå¤´åƒç½‘æ ¼\n            cartoonGrid.innerHTML = '';\n            avatarOptions.cartoon.forEach(cartoon => {\n                const cartoonOption = document.createElement('div');\n                cartoonOption.className = 'avatar-option';\n                if (systemData.avatar.type === 'cartoon' && systemData.avatar.value === cartoon) {\n                    cartoonOption.classList.add('selected');\n                }\n                cartoonOption.innerHTML = `<img src=\"${cartoonAvatarUrls[cartoon]}\" alt=\"${cartoon}\">`;\n                cartoonOption.dataset.value = cartoon;\n                cartoonOption.addEventListener('click', () => selectAvatar('cartoon', cartoon));\n                cartoonGrid.appendChild(cartoonOption);\n            });\n            \n            // åˆå§‹åŒ–ä¸Šä¼ é¢„è§ˆ\n            if (systemData.avatar.type === 'upload' && systemData.avatar.image) {\n                uploadPreview.innerHTML = `<img src=\"${systemData.avatar.image}\" alt=\"ä¸Šä¼ çš„å¤´åƒ\">`;\n            }\n        }\n\n        // è®¾ç½®äº‹ä»¶ç›‘å¬å™¨\n        function setupEventListeners() {\n            // æ·»åŠ ä»»åŠ¡/å¥–åŠ±æŒ‰é’®\n            document.getElementById('addTaskBtn').addEventListener('click', () => openItemModal('task'));\n            document.getElementById('addRewardBtn').addEventListener('click', () => openItemModal('reward'));\n            \n            // ç§¯åˆ†è°ƒæ•´æŒ‰é’®\n            document.getElementById('addPointsBtn').addEventListener('click', () => openPointsModal('add'));\n            document.getElementById('subtractPointsBtn').addEventListener('click', () => openPointsModal('subtract'));\n            \n            // æ›´æ¢å¤´åƒæŒ‰é’®\n            document.getElementById('changeAvatarBtn').addEventListener('click', openAvatarModal);\n            \n            // æ¨¡æ€æ¡†å…³é—­æŒ‰é’®\n            document.getElementById('closeModalBtn').addEventListener('click', closeItemModal);\n            document.getElementById('closePointsModalBtn').addEventListener('click', closePointsModal);\n            document.getElementById('closeAvatarModalBtn').addEventListener('click', closeAvatarModal);\n            document.getElementById('cancelBtn').addEventListener('click', closeItemModal);\n            document.getElementById('cancelPointsBtn').addEventListener('click', closePointsModal);\n            document.getElementById('cancelAvatarBtn').addEventListener('click', closeAvatarModal);\n            document.getElementById('cancelUploadBtn').addEventListener('click', () => {\n                selectedAvatar = {...systemData.avatar};\n                updateAvatarModalSelection();\n            });\n            \n            // è¡¨å•æäº¤\n            itemForm.addEventListener('submit', handleItemSubmit);\n            pointsForm.addEventListener('submit', handlePointsSubmit);\n            \n            // å¤´åƒé€‰æ‹©å™¨æ ‡ç­¾åˆ‡æ¢\n            document.querySelectorAll('.avatar-type-btn').forEach(btn => {\n                btn.addEventListener('click', function() {\n                    const type = this.dataset.type;\n                    \n                    // æ›´æ–°æ´»åŠ¨æ ‡ç­¾\n                    document.querySelectorAll('.avatar-type-btn').forEach(b => b.classList.remove('active'));\n                    this.classList.add('active');\n                    \n                    // æ˜¾ç¤ºå¯¹åº”çš„é€‰æ‹©å™¨\n                    document.querySelectorAll('.avatar-selector').forEach(selector => {\n                        selector.classList.remove('active');\n                    });\n                    document.getElementById(`${type}Selector`).classList.add('active');\n                });\n            });\n            \n            // é€‰æ‹©å›¾ç‰‡æŒ‰é’®\n            document.getElementById('chooseImageBtn').addEventListener('click', () => {\n                avatarUpload.click();\n            });\n            \n            // å›¾ç‰‡ä¸Šä¼ å¤„ç†\n            avatarUpload.addEventListener('change', function(e) {\n                const file = e.target.files[0];\n                if (!file) return;\n                \n                // æ£€æŸ¥æ–‡ä»¶ç±»å‹\n                if (!file.type.match('image.*')) {\n                    alert('è¯·é€‰æ‹©å›¾ç‰‡æ–‡ä»¶ï¼');\n                    return;\n                }\n                \n                // æ£€æŸ¥æ–‡ä»¶å¤§å°ï¼ˆé™åˆ¶ä¸º2MBï¼‰\n                if (file.size > 2 * 1024 * 1024) {\n                    alert('å›¾ç‰‡å¤§å°ä¸èƒ½è¶…è¿‡2MBï¼');\n                    return;\n                }\n                \n                // é¢„è§ˆå›¾ç‰‡\n                const reader = new FileReader();\n                reader.onload = function(e) {\n                    uploadedImage = e.target.result;\n                    uploadPreview.innerHTML = `<img src=\"${uploadedImage}\" alt=\"ä¸Šä¼ çš„å¤´åƒ\">`;\n                    selectAvatar('upload', 'custom');\n                };\n                reader.readAsDataURL(file);\n            });\n            \n            // è®¾ç½®ä¸Šä¼ å¤´åƒæŒ‰é’®\n            document.getElementById('uploadAvatarBtn').addEventListener('click', function() {\n                if (uploadedImage) {\n                    selectAvatar('upload', 'custom');\n                    saveAvatarSettings();\n                } else {\n                    alert('è¯·å…ˆé€‰æ‹©ä¸€å¼ å›¾ç‰‡ï¼');\n                }\n            });\n            \n            // ä¿å­˜å¤´åƒè®¾ç½®æŒ‰é’®\n            document.getElementById('saveAvatarBtn').addEventListener('click', saveAvatarSettings);\n            \n            // æ•°æ®ç®¡ç†æŒ‰é’®\n            document.getElementById('exportBtn').addEventListener('click', exportData);\n            document.getElementById('importBtn').addEventListener('click', importData);\n            document.getElementById('resetBtn').addEventListener('click', resetSystem);\n            \n            // ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­\n            itemModal.addEventListener('click', function(e) {\n                if (e.target === itemModal) closeItemModal();\n            });\n            \n            pointsModal.addEventListener('click', function(e) {\n                if (e.target === pointsModal) closePointsModal();\n            });\n            \n            avatarModal.addEventListener('click', function(e) {\n                if (e.target === avatarModal) closeAvatarModal();\n            });\n        }\n\n        // æ›´æ–°æ˜¾ç¤º\n        function updateDisplay() {\n            // æ›´æ–°æ€»ç§¯åˆ†\n            totalPointsEl.textContent = systemData.totalPoints;\n            \n            // æ›´æ–°å„¿ç«¥ä¿¡æ¯\n            childNameEl.textContent = systemData.childName;\n            childAgeEl.textContent = `${systemData.childAge}å²`;\n            \n            // æ›´æ–°å¤´åƒ\n            updateAvatarDisplay();\n            \n            // æ›´æ–°ä»»åŠ¡åˆ—è¡¨\n            renderTasks();\n            \n            // æ›´æ–°å¥–åŠ±åˆ—è¡¨\n            renderRewards();\n            \n            // æ›´æ–°å†å²è®°å½•\n            renderHistory();\n            \n            // ä¿å­˜æ•°æ®åˆ°æœ¬åœ°å­˜å‚¨\n            saveData();\n        }\n\n        // æ›´æ–°å¤´åƒæ˜¾ç¤º\n        function updateAvatarDisplay() {\n            const avatar = systemData.avatar;\n            \n            if (avatar.type === 'emoji') {\n                currentAvatarEmoji.textContent = avatar.value;\n                currentAvatarEmoji.style.display = 'block';\n                if (currentAvatar.querySelector('img')) {\n                    currentAvatar.querySelector('img').remove();\n                }\n            } else if (avatar.type === 'cartoon') {\n                currentAvatarEmoji.style.display = 'none';\n                if (currentAvatar.querySelector('img')) {\n                    currentAvatar.querySelector('img').src = cartoonAvatarUrls[avatar.value];\n                } else {\n                    const img = document.createElement('img');\n                    img.src = cartoonAvatarUrls[avatar.value];\n                    img.alt = \"å¡é€šå¤´åƒ\";\n                    currentAvatar.appendChild(img);\n                }\n            } else if (avatar.type === 'upload' && avatar.image) {\n                currentAvatarEmoji.style.display = 'none';\n                if (currentAvatar.querySelector('img')) {\n                    currentAvatar.querySelector('img').src = avatar.image;\n                } else {\n                    const img = document.createElement('img');\n                    img.src = avatar.image;\n                    img.alt = \"ä¸Šä¼ çš„å¤´åƒ\";\n                    currentAvatar.appendChild(img);\n                }\n            }\n        }\n\n        // æ¸²æŸ“ä»»åŠ¡åˆ—è¡¨\n        function renderTasks() {\n            tasksListEl.innerHTML = '';\n            \n            if (systemData.tasks.length === 0) {\n                tasksListEl.innerHTML = `\n                    <div class=\"empty-state\">\n                        <i class=\"fas fa-clipboard-list\"></i>\n                        <p>è¿˜æ²¡æœ‰ä»»åŠ¡ï¼Œç‚¹å‡»\"æ·»åŠ ä»»åŠ¡\"æ¥åˆ›å»ºç¬¬ä¸€ä¸ªä»»åŠ¡ï¼</p>\n                    </div>\n                `;\n                return;\n            }\n            \n            systemData.tasks.forEach(task => {\n                const taskEl = document.createElement('div');\n                taskEl.className = 'item';\n                taskEl.innerHTML = `\n                    <div class=\"item-info\">\n                        <div class=\"item-name\">${task.name}</div>\n                        <div class=\"item-desc\">${task.description}</div>\n                    </div>\n                    <div class=\"item-points\">+${task.points}</div>\n                    <div class=\"item-controls\">\n                        <button class=\"icon-btn icon-btn-complete\" data-id=\"${task.id}\" title=\"å®Œæˆä»»åŠ¡\">\n                            <i class=\"fas fa-check\"></i>\n                        </button>\n                        <button class=\"icon-btn icon-btn-edit\" data-id=\"${task.id}\" title=\"ç¼–è¾‘ä»»åŠ¡\">\n                            <i class=\"fas fa-edit\"></i>\n                        </button>\n                        <button class=\"icon-btn icon-btn-delete\" data-id=\"${task.id}\" title=\"åˆ é™¤ä»»åŠ¡\">\n                            <i class=\"fas fa-trash\"></i>\n                        </button>\n                    </div>\n                `;\n                \n                // å¦‚æœä»»åŠ¡å·²å®Œæˆï¼Œæ·»åŠ å®ŒæˆçŠ¶æ€\n                if (task.completedToday) {\n                    taskEl.style.opacity = '0.6';\n                    taskEl.querySelector('.icon-btn-complete').innerHTML = '<i class=\"fas fa-redo\"></i>';\n                    taskEl.querySelector('.icon-btn-complete').title = \"é‡ç½®ä»»åŠ¡\";\n                }\n                \n                tasksListEl.appendChild(taskEl);\n            });\n            \n            // ä¸ºä»»åŠ¡æŒ‰é’®æ·»åŠ äº‹ä»¶ç›‘å¬å™¨\n            document.querySelectorAll('.icon-btn-complete').forEach(btn => {\n                btn.addEventListener('click', function() {\n                    const taskId = parseInt(this.getAttribute('data-id'));\n                    completeTask(taskId);\n                });\n            });\n            \n            document.querySelectorAll('.icon-btn-edit').forEach(btn => {\n                btn.addEventListener('click', function() {\n                    const taskId = parseInt(this.getAttribute('data-id'));\n                    editItem('task', taskId);\n                });\n            });\n            \n            document.querySelectorAll('.icon-btn-delete').forEach(btn => {\n                btn.addEventListener('click', function() {\n                    const taskId = parseInt(this.getAttribute('data-id'));\n                    deleteItem('task', taskId);\n                });\n            });\n        }\n\n        // æ¸²æŸ“å¥–åŠ±åˆ—è¡¨\n        function renderRewards() {\n            rewardsListEl.innerHTML = '';\n            \n            if (systemData.rewards.length === 0) {\n                rewardsListEl.innerHTML = `\n                    <div class=\"empty-state\">\n                        <i class=\"fas fa-gift\"></i>\n                        <p>è¿˜æ²¡æœ‰å¥–åŠ±ï¼Œç‚¹å‡»\"æ·»åŠ å¥–åŠ±\"æ¥åˆ›å»ºç¬¬ä¸€ä¸ªå¥–åŠ±ï¼</p>\n                    </div>\n                `;\n                return;\n            }\n            \n            systemData.rewards.forEach(reward => {\n                const rewardEl = document.createElement('div');\n                rewardEl.className = 'item reward-item';\n                rewardEl.innerHTML = `\n                    <div class=\"item-info\">\n                        <div class=\"item-name\">${reward.name}</div>\n                        <div class=\"item-desc\">${reward.description}</div>\n                    </div>\n                    <div class=\"item-points\">${reward.points}</div>\n                    <div class=\"item-controls\">\n                        <button class=\"icon-btn icon-btn-redeem\" data-id=\"${reward.id}\" title=\"å…‘æ¢å¥–åŠ±\">\n                            <i class=\"fas fa-shopping-cart\"></i>\n                        </button>\n                        <button class=\"icon-btn icon-btn-edit\" data-id=\"${reward.id}\" title=\"ç¼–è¾‘å¥–åŠ±\">\n                            <i class=\"fas fa-edit\"></i>\n                        </button>\n                        <button class=\"icon-btn icon-btn-delete\" data-id=\"${reward.id}\" title=\"åˆ é™¤å¥–åŠ±\">\n                            <i class=\"fas fa-trash\"></i>\n                        </button>\n                    </div>\n                `;\n                \n                // å¦‚æœç§¯åˆ†ä¸è¶³ï¼Œç¦ç”¨å…‘æ¢æŒ‰é’®\n                if (systemData.totalPoints < reward.points) {\n                    rewardEl.querySelector('.icon-btn-redeem').disabled = true;\n                    rewardEl.querySelector('.icon-btn-redeem').style.opacity = '0.5';\n                    rewardEl.querySelector('.icon-btn-redeem').style.cursor = 'not-allowed';\n                }\n                \n                rewardsListEl.appendChild(rewardEl);\n            });\n            \n            // ä¸ºå¥–åŠ±æŒ‰é’®æ·»åŠ äº‹ä»¶ç›‘å¬å™¨\n            document.querySelectorAll('.icon-btn-redeem').forEach(btn => {\n                btn.addEventListener('click', function() {\n                    if (this.disabled) return;\n                    const rewardId = parseInt(this.getAttribute('data-id'));\n                    redeemReward(rewardId);\n                });\n            });\n            \n            document.querySelectorAll('.icon-btn-edit').forEach(btn => {\n                btn.addEventListener('click', function() {\n                    const rewardId = parseInt(this.getAttribute('data-id'));\n                    editItem('reward', rewardId);\n                });\n            });\n            \n            document.querySelectorAll('.icon-btn-delete').forEach(btn => {\n                btn.addEventListener('click', function() {\n                    const rewardId = parseInt(this.getAttribute('data-id'));\n                    deleteItem('reward', rewardId);\n                });\n            });\n        }\n\n        // æ¸²æŸ“å†å²è®°å½•\n        function renderHistory() {\n            historyListEl.innerHTML = '';\n            \n            if (systemData.history.length === 0) {\n                historyListEl.innerHTML = `\n                    <div class=\"empty-state\">\n                        <i class=\"fas fa-history\"></i>\n                        <p>è¿˜æ²¡æœ‰ç§¯åˆ†è®°å½•ï¼Œå®Œæˆä»»åŠ¡æˆ–å…‘æ¢å¥–åŠ±åè¿™é‡Œä¼šæ˜¾ç¤ºè®°å½•ã€‚</p>\n                    </div>\n                `;\n                return;\n            }\n            \n            // æŒ‰æ—¥æœŸæ’åºï¼ˆæœ€æ–°çš„åœ¨å‰ï¼‰\n            const sortedHistory = [...systemData.history].sort((a, b) => new Date(b.date) - new Date(a.date));\n            \n            sortedHistory.forEach(record => {\n                const historyEl = document.createElement('div');\n                historyEl.className = 'history-item';\n                \n                const pointsClass = record.points > 0 ? 'history-positive' : 'history-negative';\n                const pointsSign = record.points > 0 ? '+' : '';\n                \n                historyEl.innerHTML = `\n                    <div>\n                        <div><strong>${record.name}</strong></div>\n                        <div style=\"font-size: 0.9rem; color: #7f8c8d;\">${record.reason}</div>\n                    </div>\n                    <div>\n                        <div class=\"${pointsClass}\" style=\"font-weight: bold; font-size: 1.2rem;\">${pointsSign}${record.points} ç§¯åˆ†</div>\n                        <div style=\"font-size: 0.8rem; color: #7f8c8d;\">${formatDate(record.date)}</div>\n                    </div>\n                `;\n                \n                historyListEl.appendChild(historyEl);\n            });\n        }\n\n        // å®Œæˆä»»åŠ¡\n        function completeTask(taskId) {\n            const task = systemData.tasks.find(t => t.id === taskId);\n            if (!task) return;\n            \n            // æ£€æŸ¥ä»»åŠ¡æ˜¯å¦å·²å®Œæˆ\n            if (task.completedToday) {\n                // é‡ç½®ä»»åŠ¡\n                task.completedToday = false;\n                updateDisplay();\n                return;\n            }\n            \n            // æ·»åŠ ç§¯åˆ†\n            systemData.totalPoints += task.points;\n            \n            // æ ‡è®°ä»»åŠ¡ä¸ºå·²å®Œæˆ\n            task.completedToday = true;\n            \n            // æ·»åŠ åˆ°å†å²è®°å½•\n            addHistoryRecord('task', task.name, task.points, `å®Œæˆä»»åŠ¡: ${task.name}`);\n            \n            // æ›´æ–°æ˜¾ç¤º\n            updateDisplay();\n        }\n\n        // å…‘æ¢å¥–åŠ±\n        function redeemReward(rewardId) {\n            const reward = systemData.rewards.find(r => r.id === rewardId);\n            if (!reward) return;\n            \n            // æ£€æŸ¥ç§¯åˆ†æ˜¯å¦è¶³å¤Ÿ\n            if (systemData.totalPoints < reward.points) {\n                alert('ç§¯åˆ†ä¸è¶³ï¼Œæ— æ³•å…‘æ¢æ­¤å¥–åŠ±ï¼');\n                return;\n            }\n            \n            // ç¡®è®¤å…‘æ¢\n            if (!confirm(`ç¡®å®šè¦å…‘æ¢ \"${reward.name}\" å—ï¼Ÿè¿™å°†èŠ±è´¹ ${reward.points} ç§¯åˆ†ã€‚`)) {\n                return;\n            }\n            \n            // æ‰£é™¤ç§¯åˆ†\n            systemData.totalPoints -= reward.points;\n            \n            // æ·»åŠ åˆ°å†å²è®°å½•\n            addHistoryRecord('reward', reward.name, -reward.points, `å…‘æ¢å¥–åŠ±: ${reward.name}`);\n            \n            // æ›´æ–°æ˜¾ç¤º\n            updateDisplay();\n            \n            // æ˜¾ç¤ºå…‘æ¢æˆåŠŸæ¶ˆæ¯\n            alert(`æˆåŠŸå…‘æ¢ \"${reward.name}\"ï¼`);\n        }\n\n        // æ‰“å¼€å¤´åƒé€‰æ‹©æ¨¡æ€æ¡†\n        function openAvatarModal() {\n            // åˆå§‹åŒ–é€‰æ‹©\n            selectedAvatar = {...systemData.avatar};\n            \n            // æ›´æ–°è¡¨å•ä¸­çš„å„¿ç«¥ä¿¡æ¯\n            document.getElementById('childNameInput').value = systemData.childName;\n            document.getElementById('childAgeInput').value = systemData.childAge;\n            \n            // æ›´æ–°å¤´åƒé€‰æ‹©å™¨ä¸­çš„é€‰ä¸­çŠ¶æ€\n            updateAvatarModalSelection();\n            \n            // æ˜¾ç¤ºæ¨¡æ€æ¡†\n            avatarModal.style.display = 'flex';\n        }\n\n        // æ›´æ–°å¤´åƒé€‰æ‹©å™¨ä¸­çš„é€‰ä¸­çŠ¶æ€\n        function updateAvatarModalSelection() {\n            // æ¸…é™¤æ‰€æœ‰é€‰ä¸­çŠ¶æ€\n            document.querySelectorAll('.avatar-option').forEach(option => {\n                option.classList.remove('selected');\n            });\n            \n            // æ ¹æ®å½“å‰é€‰æ‹©çš„å¤´åƒç±»å‹è®¾ç½®é€‰ä¸­çŠ¶æ€\n            if (selectedAvatar.type === 'emoji') {\n                const selectedEmoji = document.querySelector(`.avatar-option[data-value=\"${selectedAvatar.value}\"]`);\n                if (selectedEmoji) selectedEmoji.classList.add('selected');\n                \n                // åˆ‡æ¢åˆ°emojiæ ‡ç­¾\n                document.querySelector('.avatar-type-btn[data-type=\"emoji\"]').click();\n            } else if (selectedAvatar.type === 'cartoon') {\n                const selectedCartoon = document.querySelector(`.avatar-option[data-value=\"${selectedAvatar.value}\"]`);\n                if (selectedCartoon) selectedCartoon.classList.add('selected');\n                \n                // åˆ‡æ¢åˆ°cartoonæ ‡ç­¾\n                document.querySelector('.avatar-type-btn[data-type=\"cartoon\"]').click();\n            } else if (selectedAvatar.type === 'upload') {\n                if (selectedAvatar.image) {\n                    uploadPreview.innerHTML = `<img src=\"${selectedAvatar.image}\" alt=\"ä¸Šä¼ çš„å¤´åƒ\">`;\n                }\n                \n                // åˆ‡æ¢åˆ°uploadæ ‡ç­¾\n                document.querySelector('.avatar-type-btn[data-type=\"upload\"]').click();\n            }\n        }\n\n        // é€‰æ‹©å¤´åƒ\n        function selectAvatar(type, value) {\n            selectedAvatar.type = type;\n            selectedAvatar.value = value;\n            \n            if (type === 'upload') {\n                selectedAvatar.image = uploadedImage;\n            }\n            \n            updateAvatarModalSelection();\n        }\n\n        // ä¿å­˜å¤´åƒè®¾ç½®\n        function saveAvatarSettings() {\n            // æ›´æ–°ç³»ç»Ÿæ•°æ®\n            systemData.avatar = {...selectedAvatar};\n            systemData.childName = document.getElementById('childNameInput').value.trim() || \"å°æœ‹å‹\";\n            systemData.childAge = parseInt(document.getElementById('childAgeInput').value) || 6;\n            \n            // æ›´æ–°æ˜¾ç¤º\n            updateDisplay();\n            \n            // å…³é—­æ¨¡æ€æ¡†\n            closeAvatarModal();\n            \n            // æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯\n            alert('å¤´åƒå’Œå„¿ç«¥ä¿¡æ¯å·²æ›´æ–°ï¼');\n        }\n\n        // å…³é—­å¤´åƒæ¨¡æ€æ¡†\n        function closeAvatarModal() {\n            avatarModal.style.display = 'none';\n            // é‡ç½®ä¸Šä¼ é¢„è§ˆ\n            uploadedImage = null;\n        }\n\n        // æ‰“å¼€æ·»åŠ /ç¼–è¾‘é¡¹ç›®æ¨¡æ€æ¡†\n        function openItemModal(type, id = null) {\n            const modalTitle = document.getElementById('modalTitle');\n            const pointsLabel = document.getElementById('pointsLabel');\n            const frequencyGroup = document.getElementById('frequencyGroup');\n            const itemTypeInput = document.getElementById('itemType');\n            const itemIdInput = document.getElementById('itemId');\n            const itemNameInput = document.getElementById('itemName');\n            const itemDescriptionInput = document.getElementById('itemDescription');\n            const itemPointsInput = document.getElementById('itemPoints');\n            const itemFrequencyInput = document.getElementById('itemFrequency');\n            \n            // é‡ç½®è¡¨å•\n            itemForm.reset();\n            \n            // è®¾ç½®ç±»å‹\n            itemTypeInput.value = type;\n            \n            if (type === 'task') {\n                modalTitle.textContent = id ? 'ç¼–è¾‘ä»»åŠ¡' : 'æ·»åŠ ä»»åŠ¡';\n                pointsLabel.textContent = 'ç§¯åˆ†å€¼';\n                frequencyGroup.style.display = 'block';\n                \n                if (id) {\n                    // ç¼–è¾‘æ¨¡å¼ï¼šå¡«å……ç°æœ‰æ•°æ®\n                    const task = systemData.tasks.find(t => t.id === id);\n                    if (task) {\n                        itemIdInput.value = task.id;\n                        itemNameInput.value = task.name;\n                        itemDescriptionInput.value = task.description;\n                        itemPointsInput.value = task.points;\n                        itemFrequencyInput.value = task.frequency;\n                    }\n                } else {\n                    // æ·»åŠ æ¨¡å¼ï¼šè®¾ç½®é»˜è®¤å€¼\n                    itemIdInput.value = '';\n                    itemPointsInput.value = 10;\n                    itemFrequencyInput.value = 'daily';\n                }\n            } else {\n                modalTitle.textContent = id ? 'ç¼–è¾‘å¥–åŠ±' : 'æ·»åŠ å¥–åŠ±';\n                pointsLabel.textContent = 'æ‰€éœ€ç§¯åˆ†';\n                frequencyGroup.style.display = 'none';\n                \n                if (id) {\n                    // ç¼–è¾‘æ¨¡å¼ï¼šå¡«å……ç°æœ‰æ•°æ®\n                    const reward = systemData.rewards.find(r => r.id === id);\n                    if (reward) {\n                        itemIdInput.value = reward.id;\n                        itemNameInput.value = reward.name;\n                        itemDescriptionInput.value = reward.description;\n                        itemPointsInput.value = reward.points;\n                    }\n                } else {\n                    // æ·»åŠ æ¨¡å¼ï¼šè®¾ç½®é»˜è®¤å€¼\n                    itemIdInput.value = '';\n                    itemPointsInput.value = 20;\n                }\n            }\n            \n            // æ˜¾ç¤ºæ¨¡æ€æ¡†\n            itemModal.style.display = 'flex';\n            itemNameInput.focus();\n        }\n\n        // å…³é—­é¡¹ç›®æ¨¡æ€æ¡†\n        function closeItemModal() {\n            itemModal.style.display = 'none';\n        }\n\n        // å¤„ç†é¡¹ç›®è¡¨å•æäº¤\n        function handleItemSubmit(e) {\n            e.preventDefault();\n            \n            const itemType = document.getElementById('itemType').value;\n            const itemId = document.getElementById('itemId').value;\n            const itemName = document.getElementById('itemName').value.trim();\n            const itemDescription = document.getElementById('itemDescription').value.trim();\n            const itemPoints = parseInt(document.getElementById('itemPoints').value);\n            \n            if (!itemName || itemPoints <= 0) {\n                alert('è¯·å¡«å†™æœ‰æ•ˆçš„åç§°å’Œç§¯åˆ†å€¼ï¼');\n                return;\n            }\n            \n            if (itemType === 'task') {\n                const itemFrequency = document.getElementById('itemFrequency').value;\n                \n                if (itemId) {\n                    // ç¼–è¾‘ç°æœ‰ä»»åŠ¡\n                    const taskIndex = systemData.tasks.findIndex(t => t.id === parseInt(itemId));\n                    if (taskIndex !== -1) {\n                        systemData.tasks[taskIndex].name = itemName;\n                        systemData.tasks[taskIndex].description = itemDescription;\n                        systemData.tasks[taskIndex].points = itemPoints;\n                        systemData.tasks[taskIndex].frequency = itemFrequency;\n                    }\n                } else {\n                    // æ·»åŠ æ–°ä»»åŠ¡\n                    const newTask = {\n                        id: systemData.nextId.task++,\n                        name: itemName,\n                        description: itemDescription,\n                        points: itemPoints,\n                        frequency: itemFrequency,\n                        completedToday: false\n                    };\n                    systemData.tasks.push(newTask);\n                }\n            } else {\n                if (itemId) {\n                    // ç¼–è¾‘ç°æœ‰å¥–åŠ±\n                    const rewardIndex = systemData.rewards.findIndex(r => r.id === parseInt(itemId));\n                    if (rewardIndex !== -1) {\n                        systemData.rewards[rewardIndex].name = itemName;\n                        systemData.rewards[rewardIndex].description = itemDescription;\n                        systemData.rewards[rewardIndex].points = itemPoints;\n                    }\n                } else {\n                    // æ·»åŠ æ–°å¥–åŠ±\n                    const newReward = {\n                        id: systemData.nextId.reward++,\n                        name: itemName,\n                        description: itemDescription,\n                        points: itemPoints\n                    };\n                    systemData.rewards.push(newReward);\n                }\n            }\n            \n            // å…³é—­æ¨¡æ€æ¡†å¹¶æ›´æ–°æ˜¾ç¤º\n            closeItemModal();\n            updateDisplay();\n        }\n\n        // ç¼–è¾‘é¡¹ç›®\n        function editItem(type, id) {\n            openItemModal(type, id);\n        }\n\n        // åˆ é™¤é¡¹ç›®\n        function deleteItem(type, id) {\n            const confirmMsg = type === 'task' \n                ? 'ç¡®å®šè¦åˆ é™¤è¿™ä¸ªä»»åŠ¡å—ï¼Ÿ' \n                : 'ç¡®å®šè¦åˆ é™¤è¿™ä¸ªå¥–åŠ±å—ï¼Ÿ';\n            \n            if (!confirm(confirmMsg)) return;\n            \n            if (type === 'task') {\n                systemData.tasks = systemData.tasks.filter(t => t.id !== id);\n            } else {\n                systemData.rewards = systemData.rewards.filter(r => r.id !== id);\n            }\n            \n            updateDisplay();\n        }\n\n        // æ‰“å¼€ç§¯åˆ†è°ƒæ•´æ¨¡æ€æ¡†\n        function openPointsModal(action) {\n            const pointsModalTitle = document.getElementById('pointsModalTitle');\n            const pointsAmountInput = document.getElementById('pointsAmount');\n            const pointsReasonInput = document.getElementById('pointsReason');\n            \n            // è®¾ç½®æ ‡é¢˜å’Œé»˜è®¤å€¼\n            if (action === 'add') {\n                pointsModalTitle.textContent = 'æ·»åŠ ç§¯åˆ†';\n                pointsAmountInput.value = 10;\n                pointsReasonInput.placeholder = 'è¯´æ˜ä¸ºä»€ä¹ˆæ·»åŠ ç§¯åˆ†...';\n            } else {\n                pointsModalTitle.textContent = 'æ‰£é™¤ç§¯åˆ†';\n                pointsAmountInput.value = 10;\n                pointsReasonInput.placeholder = 'è¯´æ˜ä¸ºä»€ä¹ˆæ‰£é™¤ç§¯åˆ†...';\n            }\n            \n            // æ˜¾ç¤ºæ¨¡æ€æ¡†\n            pointsModal.style.display = 'flex';\n            pointsReasonInput.focus();\n        }\n\n        // å…³é—­ç§¯åˆ†è°ƒæ•´æ¨¡æ€æ¡†\n        function closePointsModal() {\n            pointsModal.style.display = 'none';\n            pointsForm.reset();\n        }\n\n        // å¤„ç†ç§¯åˆ†è°ƒæ•´è¡¨å•æäº¤\n        function handlePointsSubmit(e) {\n            e.preventDefault();\n            \n            const pointsAmount = parseInt(document.getElementById('pointsAmount').value);\n            const pointsReason = document.getElementById('pointsReason').value.trim();\n            const modalTitle = document.getElementById('pointsModalTitle').textContent;\n            \n            if (!pointsReason || pointsAmount <= 0) {\n                alert('è¯·å¡«å†™æœ‰æ•ˆçš„ç§¯åˆ†æ•°é‡å’ŒåŸå› ï¼');\n                return;\n            }\n            \n            let pointsChange = pointsAmount;\n            let actionType = 'add';\n            let actionName = 'æ·»åŠ ç§¯åˆ†';\n            \n            if (modalTitle === 'æ‰£é™¤ç§¯åˆ†') {\n                pointsChange = -pointsAmount;\n                actionType = 'subtract';\n                actionName = 'æ‰£é™¤ç§¯åˆ†';\n                \n                // æ£€æŸ¥ç§¯åˆ†æ˜¯å¦è¶³å¤Ÿ\n                if (systemData.totalPoints < pointsAmount) {\n                    alert('ç§¯åˆ†ä¸è¶³ï¼Œæ— æ³•æ‰£é™¤ï¼');\n                    return;\n                }\n            }\n            \n            // æ›´æ–°æ€»ç§¯åˆ†\n            systemData.totalPoints += pointsChange;\n            \n            // æ·»åŠ åˆ°å†å²è®°å½•\n            addHistoryRecord('adjust', actionName, pointsChange, pointsReason);\n            \n            // å…³é—­æ¨¡æ€æ¡†å¹¶æ›´æ–°æ˜¾ç¤º\n            closePointsModal();\n            updateDisplay();\n        }\n\n        // æ·»åŠ å†å²è®°å½•\n        function addHistoryRecord(type, name, points, reason) {\n            const now = new Date();\n            const historyRecord = {\n                id: systemData.nextId.history++,\n                type: type,\n                name: name,\n                points: points,\n                date: now.toISOString(),\n                reason: reason\n            };\n            \n            systemData.history.unshift(historyRecord);\n            \n            // é™åˆ¶å†å²è®°å½•æ•°é‡\n            if (systemData.history.length > 50) {\n                systemData.history = systemData.history.slice(0, 50);\n            }\n        }\n\n        // æ ¼å¼åŒ–æ—¥æœŸ\n        function formatDate(dateString) {\n            const date = new Date(dateString);\n            const now = new Date();\n            const diffMs = now - date;\n            const diffMins = Math.floor(diffMs / (1000 * 60));\n            const diffHours = Math.floor(diffMs / (1000 * 60 * 60));\n            const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));\n            \n            if (diffMins < 60) {\n                return `${diffMins}åˆ†é’Ÿå‰`;\n            } else if (diffHours < 24) {\n                return `${diffHours}å°æ—¶å‰`;\n            } else if (diffDays === 1) {\n                return 'æ˜¨å¤©';\n            } else if (diffDays < 7) {\n                return `${diffDays}å¤©å‰`;\n            } else {\n                return date.toLocaleDateString('zh-CN');\n            }\n        }\n\n        // å¯¼å‡ºæ•°æ®\n        function exportData() {\n            const dataStr = JSON.stringify(systemData, null, 2);\n            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);\n            \n            const exportFileDefaultName = 'å„¿ç«¥ç§¯åˆ†å¥–åŠ±ç³»ç»Ÿæ•°æ®.json';\n            \n            const linkElement = document.createElement('a');\n            linkElement.setAttribute('href', dataUri);\n            linkElement.setAttribute('download', exportFileDefaultName);\n            linkElement.click();\n            \n            alert('æ•°æ®å·²å¯¼å‡ºä¸ºJSONæ–‡ä»¶ï¼Œè¯·å¦¥å–„ä¿å­˜ï¼');\n        }\n\n        // å¯¼å…¥æ•°æ®\n        function importData() {\n            const input = document.createElement('input');\n            input.type = 'file';\n            input.accept = '.json';\n            \n            input.onchange = function(e) {\n                const file = e.target.files[0];\n                if (!file) return;\n                \n                const reader = new FileReader();\n                reader.onload = function(e) {\n                    try {\n                        const importedData = JSON.parse(e.target.result);\n                        \n                        // éªŒè¯å¯¼å…¥çš„æ•°æ®ç»“æ„\n                        if (!importedData.totalPoints || !importedData.tasks || !importedData.rewards || !importedData.history) {\n                            throw new Error('æ–‡ä»¶æ ¼å¼ä¸æ­£ç¡®');\n                        }\n                        \n                        // ç¡®è®¤å¯¼å…¥\n                        if (!confirm('å¯¼å…¥æ•°æ®å°†è¦†ç›–å½“å‰æ‰€æœ‰æ•°æ®ï¼Œç¡®å®šè¦ç»§ç»­å—ï¼Ÿ')) {\n                            return;\n                        }\n                        \n                        systemData = importedData;\n                        updateDisplay();\n                        initAvatarSelectors();\n                        alert('æ•°æ®å¯¼å…¥æˆåŠŸï¼');\n                    } catch (error) {\n                        alert('å¯¼å…¥å¤±è´¥ï¼šæ–‡ä»¶æ ¼å¼ä¸æ­£ç¡®æˆ–å·²æŸå');\n                    }\n                };\n                \n                reader.readAsText(file);\n            };\n            \n            input.click();\n        }\n\n        // é‡ç½®ç³»ç»Ÿ\n        function resetSystem() {\n            if (!confirm('ç¡®å®šè¦é‡ç½®ç³»ç»Ÿå—ï¼Ÿè¿™å°†æ¸…é™¤æ‰€æœ‰ä»»åŠ¡ã€å¥–åŠ±å’Œå†å²è®°å½•ï¼Œä½†ä¼šä¿ç•™å½“å‰ç§¯åˆ†å’Œå¤´åƒè®¾ç½®ã€‚')) {\n                return;\n            }\n            \n            // ä¿ç•™æ€»ç§¯åˆ†ã€å¤´åƒå’Œå„¿ç«¥ä¿¡æ¯ï¼Œé‡ç½®å…¶ä»–æ•°æ®\n            const currentPoints = systemData.totalPoints;\n            const currentAvatar = systemData.avatar;\n            const currentChildName = systemData.childName;\n            const currentChildAge = systemData.childAge;\n            \n            systemData = {\n                totalPoints: currentPoints,\n                childName: currentChildName,\n                childAge: currentChildAge,\n                avatar: currentAvatar,\n                tasks: [],\n                rewards: [],\n                history: [],\n                nextId: { task: 1, reward: 1, history: 1 }\n            };\n            \n            updateDisplay();\n            initAvatarSelectors();\n            alert('ç³»ç»Ÿå·²é‡ç½®ï¼');\n        }\n\n        // ä¿å­˜æ•°æ®åˆ°æœ¬åœ°å­˜å‚¨\n        function saveData() {\n            try {\n                localStorage.setItem('kidsRewardSystem', JSON.stringify(systemData));\n            } catch (e) {\n                console.error('ä¿å­˜æ•°æ®å¤±è´¥ï¼š', e);\n            }\n        }\n\n        // ä»æœ¬åœ°å­˜å‚¨åŠ è½½æ•°æ®\n        function loadData() {\n            try {\n                const savedData = localStorage.getItem('kidsRewardSystem');\n                if (savedData) {\n                    const parsedData = JSON.parse(savedData);\n                    \n                    // éªŒè¯æ•°æ®ç»“æ„\n                    if (parsedData.totalPoints !== undefined && \n                        parsedData.tasks && \n                        parsedData.rewards && \n                        parsedData.history) {\n                        systemData = parsedData;\n                        \n                        // ç¡®ä¿avatarå­—æ®µå­˜åœ¨\n                        if (!systemData.avatar) {\n                            systemData.avatar = { type: \"emoji\", value: \"ğŸ‘¦\", image: null };\n                        }\n                        \n                        // ç¡®ä¿childNameå’ŒchildAgeå­—æ®µå­˜åœ¨\n                        if (!systemData.childName) systemData.childName = \"å°æ˜\";\n                        if (!systemData.childAge) systemData.childAge = 6;\n                    }\n                }\n            } catch (e) {\n                console.error('åŠ è½½æ•°æ®å¤±è´¥ï¼š', e);\n            }\n        }\n\n        // æ¯æ—¥é‡ç½®æ¯æ—¥ä»»åŠ¡\n        function resetDailyTasks() {\n            const today = new Date().toDateString();\n            const lastReset = localStorage.getItem('lastTaskResetDate');\n            \n            if (lastReset !== today) {\n                systemData.tasks.forEach(task => {\n                    if (task.frequency === 'daily') {\n                        task.completedToday = false;\n                    }\n                });\n                \n                localStorage.setItem('lastTaskResetDate', today);\n                updateDisplay();\n            }\n        }\n\n        // åˆå§‹åŒ–æ¯æ—¥ä»»åŠ¡é‡ç½®\n        resetDailyTasks();\n    </script>\n</body>\n</html>","isHtml":true,"htmlPath":"G:\\æ¡Œé¢\\å…­å…­æˆé•¿è®°","htmlFiles":[],"prefix":"","pcRepo":"PakePlus-v2.1.3","iosRepo":"PakePlus-iOS-v2.1.3","androidRepo":"PakePlus-Android-v2.1.3","more":{"windows":{"label":"","title":"å…­å…­æˆé•¿è®°","url":"index.html (ç­‰èµ„æº+1)","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/17.0 Safari/605.1.15","width":1024,"height":768,"theme":null,"resizable":true,"fullscreen":false,"maximized":false,"minWidth":400,"minHeight":300,"maxWidth":1920,"maxHeight":1080,"decorations":true,"transparent":false,"titleBarStyle":"Visible","visible":true,"focus":true,"closable":true,"minimizable":true,"maximizable":true,"alwaysOnTop":false,"alwaysOnBottom":false,"center":false,"shadow":true,"skipTaskbar":false,"tabbingIdentifier":null,"parent":null,"dragDropEnabled":true,"browserExtensionsEnabled":false,"devtools":true,"contentProtected":false,"hiddenTitle":false,"incognito":false,"proxyUrl":null,"useHttpsScheme":false,"zoomHotkeysEnabled":false,"acceptFirstMouse":false,"create":false,"backgroundColor":null,"backgroundThrottling":null,"javascriptDisabled":false}},"phone":{"safeArea":{"top":0,"bottom":0,"left":0,"right":0},"header":{"show":false,"title":"","backgroundColor":"","color":"","fontSize":16,"fontWeight":"bold","loading":false,"toolBar":false,"toolBarBackgroundColor":"","toolBarColor":"","toolBarFontSize":16,"toolBarFontWeight":"bold"},"siderMenu":{"show":false,"width":0,"backgroundColor":"","color":"","fontSize":16,"fontWeight":"bold","title":"","titleColor":"","titleFontSize":16,"titleFontWeight":"bold"},"tabBar":{"show":false,"backgroundColor":"","color":"","activeColor":"","fontSize":16,"fontWeight":"bold","tabBarItem":[]},"webview":{"userAgent":"","javaScriptEnabled":true,"domStorageEnabled":true,"allowFileAccess":true,"loadWithOverviewMode":true,"setSupportZoom":true,"clearCache":true}},"ios":{"name":"eacdfbbbe","showName":"å…­å…­æˆé•¿è®°","version":"0.0.1","webUrl":"index.html (ç­‰èµ„æº+1)","id":"com.eacdfbbbe.app.ios","icon":"./app-icon.png","desc":"Package for personal use only, please do not use for commercial purposesï¼ˆæ‰“åŒ…ä»…é™ä¸ªäººä½¿ç”¨ï¼Œè¯·å‹¿ä¼ æ’­æˆ–å•†ä¸šç”¨é€”ï¼‰","pubBody":"Package for personal use only, please do not use for commercial purposesï¼ˆæ‰“åŒ…ä»…é™ä¸ªäººä½¿ç”¨ï¼Œè¯·å‹¿ä¼ æ’­æˆ–å•†ä¸šç”¨é€”ï¼‰","isHtml":true,"debug":false,"safeArea":"all"},"android":{"name":"eacdfbbbe","showName":"å…­å…­æˆé•¿è®°","version":"0.0.1","webUrl":"index.html (ç­‰èµ„æº+1)","id":"com.eacdfbbbe.app.android","icon":"./app-icon.png","input":"./app-icon.png","output":"./res","rounded":true,"copyTo":"./app/src/main/res","androidResDir":"./app/src/main/res","desc":"Package for personal use only, please do not use for commercial purposesï¼ˆæ‰“åŒ…ä»…é™ä¸ªäººä½¿ç”¨ï¼Œè¯·å‹¿ä¼ æ’­æˆ–å•†ä¸šç”¨é€”ï¼‰","pubBody":"Package for personal use only, please do not use for commercial purposesï¼ˆæ‰“åŒ…ä»…é™ä¸ªäººä½¿ç”¨ï¼Œè¯·å‹¿ä¼ æ’­æˆ–å•†ä¸šç”¨é€”ï¼‰","isHtml":true,"debug":false,"safeArea":"all"},"desktop":{"name":"eacdfbbbe","showName":"å…­å…­æˆé•¿è®°","version":"0.0.1","id":"com.eacdfbbbe.app.desktop","desc":"æ‰“åŒ…ä»…é™ä¸ªäººä½¿ç”¨ï¼Œè¯·å‹¿ä¼ æ’­æˆ–å•†ä¸šç”¨é€”ï¼Œå¦åˆ™åæœè‡ªè´Ÿ","webUrl":"index.html (ç­‰èµ„æº+1)","iconPath":"../app-icon.png","inputPath":"../app-icon.png","tempPath":"./processed-image.png","icnsPath":"../src-tauri/icons/icon.icns","pubBody":"æ‰“åŒ…ä»…é™ä¸ªäººä½¿ç”¨ï¼Œè¯·å‹¿ä¼ æ’­æˆ–å•†ä¸šç”¨é€”ï¼Œå¦åˆ™åæœè‡ªè´Ÿ","isHtml":true,"single":true,"state":true,"injectJq":false,"tauriApi":false,"buildMethod":"cloud","debug":false}}